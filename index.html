<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Club</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="index-page">
  <header>
    <a href="chart.html?source=books.json" class="chart-button" style="position: absolute; top: 10px; left: 10px; font-size: 24px; color: black; text-decoration: none;">+</a>    <a href="#" id="rasmusButton" class="chart-button" style="position: absolute; top: 125px; left: 10px; font-size: 24px; color: black; text-decoration: none;">R</a>
    <a href="#" id="henryButton" class="chart-button" style="position: absolute; top: 45px; left: 10px; font-size: 24px; color: black; text-decoration: none;">H</a>
    <a href="#" id="andreButton" class="chart-button" style="position: absolute; top: 85px; left: 10px; font-size: 24px; color: black; text-decoration: none;">A</a>
    <a href="#" id="backButton" class="chart-button" style="position: absolute; top: 160px; left: 10px; font-size: 24px; color: black; text-decoration: none;">&lt;</a>
    </header>
  <main>
    <div class="grid" id="bookGrid"></div>
    <!-- Clickable Text -->
    <div class="vertical-text" onclick="animatePage(event)">MUSERNES BOKKLUBB - 2024</div>
    <!-- Overlay for the Animation -->
    <div class="overlay" id="overlay"></div>
  </main>
  <script src="js/app.js"></script>
  <script>
    function animatePage(event) {
      const overlay = document.getElementById('overlay');
  
      // Ensure the overlay starts clean
      overlay.classList.remove('white'); // Remove any residual white background
      overlay.innerHTML = ''; // Clear any previous content
  
      // Phase 1: Flowing energy animation
      for (let i = 0; i < 3; i++) {
        const flow = document.createElement('div');
        flow.classList.add('flow');
        overlay.appendChild(flow);
      }
  
      // Activate the overlay for Phase 1
      overlay.classList.add('active');
  
      // Transition to Phase 2 (worms) after Phase 1
      setTimeout(() => {
        overlay.innerHTML = ''; // Clear flows
        overlay.style.background = 'black'; // Ensure black background
  
        // Phase 2: Add organic worms
        for (let i = 0; i < 30; i++) {
          const worm = document.createElement('div');
          worm.classList.add('worm');
  
          // Randomize worm start positions
          worm.style.top = `${Math.random() * 100}vh`;
          worm.style.left = `${Math.random() * 100}vw`;
  
          // Append worm to overlay
          overlay.appendChild(worm);
        }
      }, 15000); // Transition to worms after 15 seconds
  
      // Explosion Finale: Turn the screen white
      setTimeout(() => {
        overlay.classList.add('white');
      }, 35000); // Trigger explosion at 35 seconds
  
      // Clean up and redirect after the animation
      setTimeout(() => {
        overlay.innerHTML = ''; // Clear everything
        window.location.href = 'index.html'; // Redirect
      }, 37000); // Total duration 37 seconds
    }
  
    // Add event listeners for both click and touch
    document.querySelector('.vertical-text').addEventListener('click', animatePage);
    document.querySelector('.vertical-text').addEventListener('touchstart', animatePage);
  </script>
</body>
</html>